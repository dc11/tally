<html>
  <head>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
    <title>Lectures</title>

    <!-- Load style sheets -->
    <script type="text/javascript" src="/jquery/jquery-1.11.1.min.js"></script>
    <link rel='stylesheet' href='/bootstrap/css/bootstrap.css' />
    <link rel="stylesheet" type="text/css" href="/css/mainLayout.css" />
    <link type="text/css" href="/css/navbar.css" rel="stylesheet"/>
    <script src="javascripts/handlebars.runtime.js"></script>
    <script src="javascripts/templates.js"></script>
    <script src="/bootstrap/js/bootstrap.min.js"></script>
    <script src="/bootstrap/js/bootbox.min.js"></script>
    <script src="javascripts/classLec.js"></script>
    <script src="javascripts/cookie.js"></script>
    <script type="text/javascript">
    $(document).ready(function() {
      $.removeCookie("lecture");
      $('#currentClass').text($.cookie("class"));
      

      $('.row').on('click', '.trash', function(evt) {
        evt.preventDefault();
        var parent = $(this).parent().parent().parent();
        var content = $(parent).find('.className')[0].textContent;
        bootbox.confirm({
          message: "Are you sure you want to delete " + content + " and all associated contents?",
          backdrop: true,
          callback: function(result) {
            if (result) {  
              $(evt.target).parent().parent().parent().parent().remove();  
            }
          }
        });
      });
      // $('.row').on('click', '.edit', function(evt) {
      //   evt.preventDefault();
      //   bootbox.prompt({
      //     title: "What would you like to call the lecture?",
      //     backdrop: true,
      //     callback: function(result) {
      //       if (result !== null && result.trim().length > 0) {
      //         console.log(result.length)
      //         $(evt.target).parent().parent().children()[2].innerText = result;
      //       }
      //     } 
      //   });
      // });

      $("#add").click(function(evt) {
        bootbox.prompt({
          title: "What is the name of the new lecture?",
          backdrop: true,
          callback: function(result) {
            if (result !== null && result.trim().length > 0) {
              $('.row').prepend("<div class='col-sm-6'><a href='question.ejs' style='text-decoration:none'><div class='well nonEdit'><p class='trash'><span class='glyphicon glyphicon-trash'></span></p><p class='editLec'><span class='glyphicon glyphicon-edit'></span></p><h2 class='className'>"+result+"</h2></div></a></div>");
            }
          }
        });
      });

      $(".row").on('click', '.well', function(evt) {
        var content = $(this).find('.className')[0];
        if (typeof content !== 'undefined') {
          $.cookie("lecture", content.textContent);
        }
      });

    });
    </script>
  </head>
  <body>
    <nav class="navbar navbar-default navbar-fixed-top" role="navigation">
      <div class="container">
        <div class="navbar-header page-scroll">
          <a class="navbar-brand page-scroll"><font face="Brush Script MT"><font size="6">Tally</font></font></a>
        </div>

        <div class="collapse navbar-collapse navbar-ex1-collapse">
          <ul class="nav navbar-nav">
            <ol class="breadcrumb">
              <li></li>
              <li><a href="classes.ejs">Classes</a></li>
              <li id='currentClass' class="active">Lectures</li>
            </ol>
          </ul>
          <ul class="nav navbar-nav navbar-right">
            <li><a href="/"><span class="glyphicon glyphicon-log-out"></span> Logout</a></li>
          </ul>
        </div>
      </div>
    </nav>

    <div style="padding-top:75px; text-align:center">
      <button type='button' class='btn btn-default btn-lg addNew' id='add'><span class="glyphicon glyphicon-plus"></span> Add Lecture</button>
    </div>

    <div class='row' style="padding-top:45px">
      <div class="col-sm-6">
        <a href="question.ejs" style="text-decoration:none">
          <div class="well nonEdit">
            <p class="trash"><span class="glyphicon glyphicon-trash"></span></p>
            <p class="editLec"><span class="glyphicon glyphicon-edit"></span></p>
            <h2 class="className">Lecture 1</h2>
          </div>
        </a>
      </div>
    </div>
    
  </body>
</html>
